{"id":1485,"date":"2013-01-25T14:01:30","date_gmt":"2013-01-25T21:01:30","guid":{"rendered":"http:\/\/xiehang.com\/blog\/?p=1485"},"modified":"2013-01-25T14:01:30","modified_gmt":"2013-01-25T21:01:30","slug":"apache_note-in-php-is-sweet","status":"publish","type":"post","link":"https:\/\/xiehang.com\/blog\/2013\/01\/25\/apache_note-in-php-is-sweet\/","title":{"rendered":"apache_note() in PHP is sweet"},"content":{"rendered":"<p>I was asked to find a solution to write customized Apache log entry (in Apache access log, not error log), other requirements include easy to use, which implicitly means &#8220;PHP friendly&#8221;, and flexible, which means &#8220;free format&#8221; and &#8220;may or may not have the value&#8221;.<\/p>\n<p>Seriously, the first thing jumped into my mind was an Apache module (let&#8217;s hack mod_log!) or a PHP extension, but later on I found that &#8230; I don&#8217;t want to maintain another orphan project especially it will be orphan since nobody want to touch it after it&#8217;s up and running (I have one already, which does some cookie stuffs). So I move on to Google &#8230;<\/p>\n<p>Then I found <a href=\"http:\/\/php.net\/manual\/en\/function.apache-note.php\">apache_note()<\/a>, plus <a href=\"http:\/\/httpd.apache.org\/docs\/2.2\/mod\/mod_log_config.html\">mod_log_config<\/a> (search for <code>%{<var>Foobar<\/var>}n<\/code>), all that I need to do is tell PHP guys to call this function, and tell ops guys to setup Apache log properly, we are all set.<\/p>\n<p>It&#8217;s good to see apache_note can change the note as many times as you want, whenever the request is finished on server side, the final data will be written to log.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>I was asked to find a solution to write customized Apache log entry (in Apache access log, not error log), other requirements include easy to use, which implicitly means &#8220;PHP friendly&#8221;, and flexible, which means &#8220;free format&#8221; and &#8220;may or may not have the value&#8221;. Seriously, the first thing jumped into my mind was an <a href='https:\/\/xiehang.com\/blog\/2013\/01\/25\/apache_note-in-php-is-sweet\/' class='excerpt-more'>[&#8230;]<\/a><\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"closed","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[1],"tags":[82,399,400,240,72],"_links":{"self":[{"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/posts\/1485"}],"collection":[{"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/comments?post=1485"}],"version-history":[{"count":2,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/posts\/1485\/revisions"}],"predecessor-version":[{"id":1488,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/posts\/1485\/revisions\/1488"}],"wp:attachment":[{"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/media?parent=1485"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/categories?post=1485"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/tags?post=1485"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}