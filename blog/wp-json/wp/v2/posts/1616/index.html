{"id":1616,"date":"2014-01-15T19:11:55","date_gmt":"2014-01-16T02:11:55","guid":{"rendered":"http:\/\/xiehang.com\/blog\/?p=1616"},"modified":"2014-01-28T11:02:25","modified_gmt":"2014-01-28T18:02:25","slug":"get-rendered-html","status":"publish","type":"post","link":"https:\/\/xiehang.com\/blog\/2014\/01\/15\/get-rendered-html\/","title":{"rendered":"Get rendered HTML"},"content":{"rendered":"<p>Search team is doing crawling and some web sites are heavily using JavaScript to generate content. Whenever I said &#8220;heavily&#8221; I mean none of the UI elements was from HTML, instead, JavaScript runs after the page loaded, then shown to users.<\/p>\n<p>I&#8217;m doing a prototype so that they can take as a reference and later on do something fit into their system better. The prototype as based on <a href=\"http:\/\/phantomjs.org\/\">PhantomJS<\/a>, it was in Ubuntu (12.04 LTS) repository which makes my life much easier. Again, I need to install xvfb so that I can run X-based application in command line.<!--more--><\/p>\n<p>After everything got installed, simply edit a JS file like this:<br \/>\n<code><br \/>\nvar page = require('webpage').create();<br \/>\npage.settings.userAgent = 'Mozilla\/5.0 (Windows NT 6.1; WOW64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/31.0.1650.63 Safari\/537.36';<br \/>\npage.open('https:\/\/www.google.com\/webhp?hl=zh-CN&sourceid=cnhp#hl=zh-CN&q=%E5%BE%B7%E4%BC%AF%E5%AE%B6%E7%9A%84%E8%8B%94%E4%B8%9D&safe=strict', function(status) {<br \/>\n    if (status !== 'success') {<br \/>\n        console.log('Unable to access network');<br \/>\n    } else {<br \/>\n        window.setTimeout(function() {<br \/>\n            var dyn_content = page.evaluate(function() {<br \/>\n                return document.getElementById('rhs_block').innerHTML;<br \/>\n            });<br \/>\n            console.log(dyn_content);<br \/>\n            phantom.exit();<br \/>\n        }, 1000);<br \/>\n        console.log('time again');<br \/>\n    }<br \/>\n});<br \/>\n<\/code><\/p>\n<p>Then the element will be printed out on the screen &#8230;<\/p>\n<p>I still need to figure out a better way to get rid of codes like &#8220;setTimeout(&#8230;, 1000)&#8221; as I believe it slows down the processing quite a lot, but anyway, it&#8217;s a prototype &#8230;<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Search team is doing crawling and some web sites are heavily using JavaScript to generate content. Whenever I said &#8220;heavily&#8221; I mean none of the UI elements was from HTML, instead, JavaScript runs after the page loaded, then shown to users. I&#8217;m doing a prototype so that they can take as a reference and later <a href='https:\/\/xiehang.com\/blog\/2014\/01\/15\/get-rendered-html\/' class='excerpt-more'>[&#8230;]<\/a><\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"closed","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[1],"tags":[328,468],"_links":{"self":[{"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/posts\/1616"}],"collection":[{"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/comments?post=1616"}],"version-history":[{"count":2,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/posts\/1616\/revisions"}],"predecessor-version":[{"id":1639,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/posts\/1616\/revisions\/1639"}],"wp:attachment":[{"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/media?parent=1616"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/categories?post=1616"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/tags?post=1616"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}