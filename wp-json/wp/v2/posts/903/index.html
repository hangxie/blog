{"id":903,"date":"2010-01-18T22:16:20","date_gmt":"2010-01-19T05:16:20","guid":{"rendered":"http:\/\/xiehang.com\/blog\/?p=903"},"modified":"2010-01-18T22:17:51","modified_gmt":"2010-01-19T05:17:51","slug":"adding-new-nodes-to-cassandra-cluster","status":"publish","type":"post","link":"https:\/\/xiehang.com\/blog\/2010\/01\/18\/adding-new-nodes-to-cassandra-cluster\/","title":{"rendered":"Adding new nodes to Cassandra cluster"},"content":{"rendered":"<p>Actually this apply to adding new nodes, or removing existing nodes:<\/p>\n<ul>\n<li>Add the new node in, make sure AutoBootstrap is set to true so it will step into bootstrap node, for removing old nodes, just shut it down<\/li>\n<li>For all existing nodes current in ring, do the calculation to get different ranges which used for token, the formula is 2^127\/nodes.<\/li>\n<li>Now, on each node, run &#8220;nodeprobe move token-for-this-node&#8221;, you can run only one node at a time as data will be moved around<\/li>\n<li>After all nodes finish the move, do &#8220;nodeprobe cleanup&#8221; to remove useless entries<\/li>\n<\/ul>\n<p>The serving should not be affected during the operation though performance may be affected.<\/p>\n<p>The &#8220;loadbalance&#8221; does not make things perfect, though Cassandra guys mentioned it should be good enough.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Actually this apply to adding new nodes, or removing existing nodes: Add the new node in, make sure AutoBootstrap is set to true so it will step into bootstrap node, for removing old nodes, just shut it down For all existing nodes current in ring, do the calculation to get different ranges which used for <a href='https:\/\/xiehang.com\/blog\/2010\/01\/18\/adding-new-nodes-to-cassandra-cluster\/' class='excerpt-more'>[&#8230;]<\/a><\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"closed","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[1],"tags":[155,166],"_links":{"self":[{"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/posts\/903"}],"collection":[{"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/comments?post=903"}],"version-history":[{"count":3,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/posts\/903\/revisions"}],"predecessor-version":[{"id":906,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/posts\/903\/revisions\/906"}],"wp:attachment":[{"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/media?parent=903"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/categories?post=903"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/tags?post=903"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}