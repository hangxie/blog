{"id":472,"date":"2009-06-19T00:30:57","date_gmt":"2009-06-19T07:30:57","guid":{"rendered":"http:\/\/xiehang.com\/blog\/?p=472"},"modified":"2009-06-19T21:49:01","modified_gmt":"2009-06-20T04:49:01","slug":"smiley-test","status":"publish","type":"post","link":"https:\/\/xiehang.com\/blog\/2009\/06\/19\/smiley-test\/","title":{"rendered":"Smiley test"},"content":{"rendered":"<p>Testing smilies.<\/p>\n<p>I think I got it fixed &#8211; the problem is that &#8220;\/&#8221; is used as delimiter of regular expression, and if &#8220;\/&#8221; is part of a smiley&#8217;s pattern, the whole thing is broken.<\/p>\n<p>So I&#8217;m defining a delimiter variable in wp-includes\/functions.php, in function smilies_init(), and use a character that can never be used (well, sort of) &#8211; I&#8217;m using &#8220;\\001&#8221; for now. Then replace all occurrences of &#8220;\/&#8221; with $delimiter while composing $wp_smiliessearch, and that&#8217;s it.<\/p>\n<p>Only open issue, which I don&#8217;t think it is related, is that two continuous #:-s will have only one shows up, still debugging &#8230;<!--more--><\/p>\n<table border=\"1\" align=\"center\">\n<tr>\n<td>&#58;&#64;&#41;<\/td>\n<td align=\"center\">:@)<\/td>\n<td>&#61;&#80;&#126;<\/td>\n<td align=\"center\">=P~<\/td>\n<td>&#61;&#112;&#126;<\/td>\n<td align=\"center\">=p~<\/td>\n<td>&#62;&#58;&#80;<\/td>\n<td align=\"center\">&gt;:P<\/td>\n<td>&#62;&#58;&#112;<\/td>\n<td align=\"center\">&gt;:p<\/td>\n<\/tr>\n<tr>\n<td>&#58;&#45;&#47;<\/td>\n<td align=\"center\">:-\/<\/td>\n<td>&#64;&#45;&#41;<\/td>\n<td align=\"center\">@-)<\/td>\n<td>&#58;&#45;&#34;<\/td>\n<td align=\"center\">:-&#8220;<\/td>\n<td>&#37;&#45;&#40;<\/td>\n<td align=\"center\">%-(<\/td>\n<td>&#91;&#45;&#88;<\/td>\n<td align=\"center\">[-X<\/td>\n<\/tr>\n<tr>\n<td>&#91;&#45;&#120;<\/td>\n<td align=\"center\">[-x<\/td>\n<td>&#58;&#45;&#64;<\/td>\n<td align=\"center\">:-@<\/td>\n<td>&#58;&#68;<\/td>\n<td align=\"center\">\ud83d\ude00<\/td>\n<td>&#58;&#100;<\/td>\n<td align=\"center\">:d<\/td>\n<td>&#58;&#45;&#68;<\/td>\n<td align=\"center\">\ud83d\ude00<\/td>\n<\/tr>\n<tr>\n<td>&#58;&#45;&#100;<\/td>\n<td align=\"center\">:-d<\/td>\n<td>&#58;&#124;<\/td>\n<td align=\"center\">\ud83d\ude10<\/td>\n<td>&#58;&#45;&#124;<\/td>\n<td align=\"center\">\ud83d\ude10<\/td>\n<td>&#61;&#41;&#41;<\/td>\n<td align=\"center\">=))<\/td>\n<td>&#59;&#59;&#41;<\/td>\n<td align=\"center\">;;)<\/td>\n<\/tr>\n<tr>\n<td>&#73;&#45;&#41;<\/td>\n<td align=\"center\">I-)<\/td>\n<td>&#105;&#45;&#41;<\/td>\n<td align=\"center\">i-)<\/td>\n<td>&#58;&#42;<\/td>\n<td align=\"center\">:*<\/td>\n<td>&#58;&#45;&#42;<\/td>\n<td align=\"center\">:-*<\/td>\n<td>&#58;&#34;&#62;<\/td>\n<td align=\"center\">:&#8221;&gt;<\/td>\n<\/tr>\n<tr>\n<td>&#58;&#45;&#38;<\/td>\n<td align=\"center\">:-&#038;<\/td>\n<td>&#58;&#41;&#93;<\/td>\n<td align=\"center\">:)]<\/td>\n<td>&#58;&#45;&#83;&#83;<\/td>\n<td align=\"center\">:-SS<\/td>\n<td>&#58;&#45;&#115;&#115;<\/td>\n<td align=\"center\">:-ss<\/td>\n<td>&#58;&#45;&#115;&#83;<\/td>\n<td align=\"center\">:-sS<\/td>\n<\/tr>\n<tr>\n<td>&#58;&#45;&#83;&#115;<\/td>\n<td align=\"center\">:-Ss<\/td>\n<td>&#126;&#79;&#41;<\/td>\n<td align=\"center\">~O)<\/td>\n<td>&#126;&#111;&#41;<\/td>\n<td align=\"center\">~o)<\/td>\n<td>&#42;&#42;&#61;&#61;<\/td>\n<td align=\"center\">**==<\/td>\n<td>&#64;&#125;&#59;&#45;<\/td>\n<td align=\"center\">@};-<\/td>\n<\/tr>\n<tr>\n<td>&#58;&#45;&#60;<\/td>\n<td align=\"center\">:-&lt;<\/td>\n<td>&#62;&#58;&#41;<\/td>\n<td align=\"center\">&gt;:)<\/td>\n<td>&#91;&#45;&#79;&#60;<\/td>\n<td align=\"center\">[-O&lt;<\/td>\n<td>&#91;&#45;&#111;&#60;<\/td>\n<td align=\"center\">[-o&lt;<\/td>\n<td>&#98;&#45;&#40;<\/td>\n<td align=\"center\">b-(<\/td>\n<\/tr>\n<tr>\n<td>&#66;&#45;&#40;<\/td>\n<td align=\"center\">B-(<\/td>\n<td>&#58;&#94;&#111;<\/td>\n<td align=\"center\">:^o<\/td>\n<td>&#58;&#94;&#79;<\/td>\n<td align=\"center\">:^O<\/td>\n<td>&#59;&#41;&#41;<\/td>\n<td align=\"center\">;))<\/td>\n<td>&#58;&#45;&#119;<\/td>\n<td align=\"center\">:-w<\/td>\n<\/tr>\n<tr>\n<td>&#58;&#45;&#87;<\/td>\n<td align=\"center\">:-W<\/td>\n<td>&#58;&#45;&#83;<\/td>\n<td align=\"center\">:-S<\/td>\n<td>&#58;&#45;&#115;<\/td>\n<td align=\"center\">:-s<\/td>\n<td>&#58;&#45;&#106;<\/td>\n<td align=\"center\">:-j<\/td>\n<td>&#58;&#45;&#74;<\/td>\n<td align=\"center\">:-J<\/td>\n<\/tr>\n<tr>\n<td>&#58;&#45;&#116;<\/td>\n<td align=\"center\">:-t<\/td>\n<td>&#58;&#45;&#84;<\/td>\n<td align=\"center\">:-T<\/td>\n<td>&#62;&#58;&#68;&#60;<\/td>\n<td align=\"center\">&gt;:D&lt;<\/td>\n<td>&#62;&#58;&#100;&#60;<\/td>\n<td align=\"center\">&gt;:d&lt;<\/td>\n<td>&#40;&#37;&#41;<\/td>\n<td align=\"center\">(%)<\/td>\n<\/tr>\n<tr>\n<td>&#79;&#58;&#41;<\/td>\n<td align=\"center\">O:)<\/td>\n<td>&#111;&#58;&#41;<\/td>\n<td align=\"center\">o:)<\/td>\n<td>&#79;&#58;&#45;&#41;<\/td>\n<td align=\"center\">O:-)<\/td>\n<td>&#111;&#58;&#45;&#41;<\/td>\n<td align=\"center\">o:-)<\/td>\n<td>&#76;&#45;&#41;<\/td>\n<td align=\"center\">L-)<\/td>\n<\/tr>\n<tr>\n<td>&#108;&#45;&#41;<\/td>\n<td align=\"center\">l-)<\/td>\n<td>&#37;&#37;&#45;<\/td>\n<td align=\"center\">%%-<\/td>\n<td>&#58;&#41;&#41;<\/td>\n<td align=\"center\">:))<\/td>\n<td>&#58;&#45;&#41;&#41;<\/td>\n<td align=\"center\">:-))<\/td>\n<td>&#58;&#79;<\/td>\n<td align=\"center\">:O<\/td>\n<\/tr>\n<tr>\n<td>&#58;&#111;<\/td>\n<td align=\"center\">\ud83d\ude2e<\/td>\n<td>&#58;&#45;&#79;<\/td>\n<td align=\"center\">:-O<\/td>\n<td>&#58;&#45;&#111;<\/td>\n<td align=\"center\">\ud83d\ude2e<\/td>\n<td>&#111;&#61;&#62;<\/td>\n<td align=\"center\">o=&gt;<\/td>\n<td>&#79;&#61;&#62;<\/td>\n<td align=\"center\">O=&gt;<\/td>\n<\/tr>\n<tr>\n<td>&#58;&#41;<\/td>\n<td align=\"center\">\ud83d\ude42<\/td>\n<td>&#58;&#45;&#41;<\/td>\n<td align=\"center\">\ud83d\ude42<\/td>\n<td>&#58;&#45;&#66;<\/td>\n<td align=\"center\">:-B<\/td>\n<td>&#58;&#45;&#98;<\/td>\n<td align=\"center\">:-b<\/td>\n<td>&#40;&#126;&#126;&#41;<\/td>\n<td align=\"center\">(~~)<\/td>\n<\/tr>\n<tr>\n<td>&#94;&#58;&#41;&#94;<\/td>\n<td align=\"center\">^:)^<\/td>\n<td>&#61;&#59;<\/td>\n<td align=\"center\">=;<\/td>\n<td>&#58;&#45;&#76;<\/td>\n<td align=\"center\">:-L<\/td>\n<td>&#58;&#45;&#108;<\/td>\n<td align=\"center\">:-l<\/td>\n<td>&#58;&#62;<\/td>\n<td align=\"center\">:&gt;<\/td>\n<\/tr>\n<tr>\n<td>&#58;&#45;&#62;<\/td>\n<td align=\"center\">:-&gt;<\/td>\n<td>&#66;&#45;&#41;<\/td>\n<td align=\"center\">B-)<\/td>\n<td>&#98;&#45;&#41;<\/td>\n<td align=\"center\">b-)<\/td>\n<td>&#58;&#45;&#99;<\/td>\n<td align=\"center\">:-c<\/td>\n<td>&#58;&#45;&#67;<\/td>\n<td align=\"center\">:-C<\/td>\n<\/tr>\n<tr>\n<td>&#58;&#45;&#63;<\/td>\n<td align=\"center\">\ud83d\ude15<\/td>\n<td>&#40;&#42;&#41;<\/td>\n<td align=\"center\">(*)<\/td>\n<td>&#60;&#41;&#58;&#41;<\/td>\n<td align=\"center\">&lt;):)<\/td>\n<td>&#61;&#40;&#40;<\/td>\n<td align=\"center\">=((<\/td>\n<td>&#58;&#45;&#104;<\/td>\n<td align=\"center\">:-h<\/td>\n<\/tr>\n<tr>\n<td>&#58;&#45;&#72;<\/td>\n<td align=\"center\">:-H<\/td>\n<td>&#62;&#58;&#47;<\/td>\n<td align=\"center\">&gt;:\/<\/td>\n<td>&#61;&#58;&#41;<\/td>\n<td align=\"center\">=:)<\/td>\n<td>&#58;&#111;&#51;<\/td>\n<td align=\"center\">:o3<\/td>\n<td>&#58;&#79;&#51;<\/td>\n<td align=\"center\">:O3<\/td>\n<\/tr>\n<tr>\n<td>&#56;&#45;&#62;<\/td>\n<td align=\"center\">8-&gt;<\/td>\n<td>&#58;&#45;&#63;&#63;<\/td>\n<td align=\"center\">:-??<\/td>\n<td>&#126;&#58;&#62;<\/td>\n<td align=\"center\">~:&gt;<\/td>\n<td>&#91;&#45;&#40;<\/td>\n<td align=\"center\">[-(<\/td>\n<td>&#58;&#79;&#41;<\/td>\n<td align=\"center\">:O)<\/td>\n<\/tr>\n<tr>\n<td>&#58;&#111;&#41;<\/td>\n<td align=\"center\">:o)<\/td>\n<td>&#47;&#58;&#41;<\/td>\n<td align=\"center\">\/:)<\/td>\n<td>&#35;&#58;&#45;&#115;<\/td>\n<td align=\"center\">#:-s<\/td>\n<td>&#35;&#58;&#45;&#83;<\/td>\n<td align=\"center\">#:-S<\/td>\n<td>&#56;&#45;&#124;<\/td>\n<td align=\"center\">8-|<\/td>\n<\/tr>\n<tr>\n<td>&#56;&#45;&#125;<\/td>\n<td align=\"center\">8-}<\/td>\n<td>&#58;&#80;<\/td>\n<td align=\"center\">\ud83d\ude1b<\/td>\n<td>&#58;&#112;<\/td>\n<td align=\"center\">:p<\/td>\n<td>&#58;&#45;&#80;<\/td>\n<td align=\"center\">\ud83d\ude1b<\/td>\n<td>&#58;&#45;&#112;<\/td>\n<td align=\"center\">:-p<\/td>\n<\/tr>\n<tr>\n<td>&#40;&#58;&#124;<\/td>\n<td align=\"center\">(:|<\/td>\n<td>&#61;&#68;&#62;<\/td>\n<td align=\"center\">=D&gt;<\/td>\n<td>&#61;&#100;&#62;<\/td>\n<td align=\"center\">=d&gt;<\/td>\n<td>&#58;&#40;&#40;<\/td>\n<td align=\"center\">:((<\/td>\n<td>&#58;&#45;&#40;&#40;<\/td>\n<td align=\"center\">:-((<\/td>\n<\/tr>\n<tr>\n<td>&#58;&#40;<\/td>\n<td align=\"center\">\ud83d\ude41<\/td>\n<td>&#58;&#45;&#40;<\/td>\n<td align=\"center\">\ud83d\ude41<\/td>\n<td>&#58;&#41;&#62;&#45;<\/td>\n<td align=\"center\">:)&gt;-<\/td>\n<td>&#92;&#58;&#68;&#47;<\/td>\n<td align=\"center\">\\:D\/<\/td>\n<td>&#92;&#58;&#100;&#47;<\/td>\n<td align=\"center\">\\:d\/<\/td>\n<\/tr>\n<tr>\n<td>&#51;&#58;&#45;&#79;<\/td>\n<td align=\"center\">3:-O<\/td>\n<td>&#51;&#58;&#45;&#111;<\/td>\n<td align=\"center\">3:-o<\/td>\n<td>&#62;&#45;&#41;<\/td>\n<td align=\"center\">&gt;-)<\/td>\n<td>&#56;&#45;&#88;<\/td>\n<td align=\"center\">8-X<\/td>\n<td>&#56;&#45;&#120;<\/td>\n<td align=\"center\">8-x<\/td>\n<\/tr>\n<tr>\n<td>&#58;&#45;&#36;<\/td>\n<td align=\"center\">:-$<\/td>\n<td>&#36;&#45;&#41;<\/td>\n<td align=\"center\">$-)<\/td>\n<td>&#58;&#40;&#124;&#41;<\/td>\n<td align=\"center\">:(|)<\/td>\n<td>&#59;&#41;<\/td>\n<td align=\"center\">\ud83d\ude09<\/td>\n<td>&#59;&#45;&#41;<\/td>\n<td align=\"center\">\ud83d\ude09<\/td>\n<\/tr>\n<tr>\n<td>&#60;&#58;&#45;&#80;<\/td>\n<td align=\"center\">&lt;:-P<\/td>\n<td>&#60;&#58;&#45;&#112;<\/td>\n<td align=\"center\">&lt;:-p<\/td>\n<td>&#58;&#120;<\/td>\n<td align=\"center\">\ud83d\ude21<\/td>\n<td>&#58;&#88;<\/td>\n<td align=\"center\">:X<\/td>\n<td>&#58;&#45;&#120;<\/td>\n<td align=\"center\">\ud83d\ude21<\/td>\n<\/tr>\n<tr>\n<td>&#58;&#45;&#88;<\/td>\n<td align=\"center\">:-X<\/td>\n<td>&#88;&#40;<\/td>\n<td align=\"center\">X(<\/td>\n<td>&#120;&#40;<\/td>\n<td align=\"center\">x(<\/td>\n<td>&#88;&#45;&#40;<\/td>\n<td align=\"center\">X-(<\/td>\n<td>&#120;&#45;&#40;<\/td>\n<td align=\"center\">x-(<\/td>\n<\/tr>\n<tr>\n<td>&#111;&#45;&#62;<\/td>\n<td align=\"center\">o-&gt;<\/td>\n<td>&#79;&#45;&#62;<\/td>\n<td align=\"center\">O-&gt;<\/td>\n<td>&#42;&#45;&#58;&#41;<\/td>\n<td align=\"center\">*-:)<\/td>\n<td>&#126;&#88;&#40;<\/td>\n<td align=\"center\">~X(<\/td>\n<td>&#126;&#120;&#40;<\/td>\n<td align=\"center\">~x(<\/td>\n<\/tr>\n<tr>\n<td>&#35;&#45;&#111;<\/td>\n<td align=\"center\">#-o<\/td>\n<td>&#111;&#45;&#43;<\/td>\n<td align=\"center\">o-+<\/td>\n<td>&#79;&#45;&#43;<\/td>\n<td align=\"center\">O-+<\/td>\n<td>&nbsp;<\/td>\n<td>&nbsp;<\/td>\n<td>&nbsp;<\/td>\n<td>&nbsp;<\/td>\n<\/tr>\n<\/tbody>\n<\/table>\n","protected":false},"excerpt":{"rendered":"<p>Testing smilies. I think I got it fixed &#8211; the problem is that &#8220;\/&#8221; is used as delimiter of regular expression, and if &#8220;\/&#8221; is part of a smiley&#8217;s pattern, the whole thing is broken. So I&#8217;m defining a delimiter variable in wp-includes\/functions.php, in function smilies_init(), and use a character that can never be used <a href='https:\/\/xiehang.com\/blog\/2009\/06\/19\/smiley-test\/' class='excerpt-more'>[&#8230;]<\/a><\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"closed","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[1],"tags":[71,28],"_links":{"self":[{"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/posts\/472"}],"collection":[{"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/comments?post=472"}],"version-history":[{"count":24,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/posts\/472\/revisions"}],"predecessor-version":[{"id":496,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/posts\/472\/revisions\/496"}],"wp:attachment":[{"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/media?parent=472"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/categories?post=472"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/xiehang.com\/blog\/wp-json\/wp\/v2\/tags?post=472"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}